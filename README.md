# Octree
八叉树优化射线相交，worker中建树与搜索

## 思路
### 建树
- 八叉树root按层级分支，node包围盒与构件包围盒相交，存储有相交的node到构件数据内
- 遍历构件顶点，与构件存储的八叉树子节点相交，将相交的顶点的面存到子节点
- 全部构件遍历结束后，将没有面数据的子节点删除
- 最终八叉树的各个子节点中储存着位于子节点内的面

### 搜索
- 判断射线有无与node相交，相交到的返回node中所有面数据
- 遍历面数据，面与射线相交，将相交到的信息排序返回



## 优化
- 优化数据存储格式
- 将顶点、矩阵、构件名存成全局数组，只储存一次，通过序号引用：有一定的优化效果
- 将顶点、矩阵数据从数组改为typeArray，在此基础上构件分批次添加到树：优化效果不明显
- 将face对应的三个顶点的序号放全局，且构件数据用一个扔一个，并将类型用数字代替
- 将OctreeObjectData里的属性存到一个buffer里，或者将属性存到数组，或者将属性key缩少字节：没有明显优化效果
- 去掉faceData多的属性：有明显优化效果，比第三次尝试的空间占用率更低
- 将node中的face存成typeArray,face数据信息三个数字一组：优化效果非常好
